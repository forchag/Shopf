{% extends "dashboard/admin/base.html" %}
{% load static %}
{% load i18n %}

{% block content %}
<div class="card">
    <!-- Header -->
    <div class="card-header border-bottom">
      <h5 class="card-header-title">{% trans "Edit/Create product" %}</h5>
    </div>
    <!-- End Header -->

    <!-- Body -->
    <div class="card-body">
      <form action="." method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row d-flex ">
          <div class="col-md-6 mb-3">
            <label >{% trans "Product name" %}</label>
            {{form.title}}
          </div>
          <div class="col-md-6 mb-3">
            <label>{% trans "Product slug" %}</label>
            {{form.slug}}
          </div>
          <div class="col-md-6 mb-3">
            <label>{% trans "Quantity" %}</label>
            {{form.stock}}
          </div>

          <div class="col-md-6 mb-3">
            <label>{% trans "Status" %}</label>
            {{form.status}}
          </div>
          <div class="col-md-6 mb-3">
            <label for="cat-id">{% trans "Category" %}</label>
            <br>
            {{form.category}}
        </div>
          <div class="col-md-4 mb-3">
            <label>{% trans "Price" %}</label>
            {{form.price}}
          </div>
          <div class="col-md-2 mb-3">
            <label>{% trans "Discount percentage" %}</label>
            {{form.discount_percent}}
          </div>

          <div class="col-md-12 mb-3">
            <label>{% trans "Description" %}</label>
            {{ form.media }}
            {{form.description}}
          </div>


          <div class="col-md-12 mb-3">
            <label>{% trans "Product image" %}</label>
            {{image_form.images}}
          </div>

          <div class=" d-flex pt-5 justify-content-end">
            <a class="btn btn-secondary ms-3" href="{% url 'dashboard:admin:show-prod' %}">{% trans "Back" %}</a>
            <button type="submit" class="btn btn-primary ms-3">{% trans "Submit product" %}</button>
          </div>
        </div>
    </form>
  </div>
  <div class="card-footer">
{% endblock content %}

{% block extera-js %}
<script>
  function slugify(titleStr) {
      titleStr = titleStr.replace(/^\s+|\s+$/g, '');
      titleStr = titleStr.toLowerCase();
      //persian support
      titleStr = titleStr.replace(/[^a-z0-9_\s-ءاأإآؤئبتثجحخدذرزسشصضطظعغفقكلمنهويةى]#u/, '')
          // Collapse whitespace and replace by -
          .replace(/\s+/g, '-')
          // Collapse dashes
          .replace(/-+/g, '-');
      slugStr = titleStr;
      return slugStr;
  }
      $(document).ready(function(){
          $('#titleInput').on('input', function(){
              var inputText = $(this).val();
              // Perform an action with the text
              var slugifyText = slugify(inputText);
              $('#slugInput').val(slugifyText);
              // Add your custom action here
          });
      });
  </script>

<script>
  $(document).ready(function() {
      VirtualSelect.init({
          ele: '#cat-id'
      });
  });
</script>
{% endblock extera-js %}
